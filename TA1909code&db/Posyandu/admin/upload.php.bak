<?php
    function upload_foto($foto_name,$foto_type){
        $direktori          = "../media/source/";
        $direktoriThumb     = "../media/thumbs/";
        //$tgl              = round(microtime(true));
        $tgl                = date("YmdHis");
        $file               = $direktori.$tgl;
        //simpan gambar ukuran sebenarnya
        $realimagename      = $_FILES['foto_header']['tmp_name'];
        move_uploaded_file($realimagename, $file);

        //identitas file gambar
        $realimages         = imagecreatefromjpeg($file);
        $width              = imageSX($realimages);
        $height             = imageSY($realimages);

        //simpan ukuran thumb
        $thumbwidth         = 150;
        $thumbheight         = ($thumbwidth / $width ) * $height;

        //mengubah ukuran gambar
        $thumbimage         =imagecreatetruecolor($thumbwidth, $tumbheight);
        imagecopyresampled($thumbimage, $realimages, 0,0,0,0, $thumbwidth, $thumbheight, $width, $height);

        //simpan gambar thumbnaill
        imagejpeg($thumbimage, $direktoriThumb, "thumb_".$tgl);

        //hapus objek gambar dalam memori
        imagedestroy($realimages);
        imagedestroy($thumbimage);

        $informasi   = new informasi();
        $tgl_post    = date_format(date_create($_POST['tgl_post']), 'Y-m-d');
        $id_kategori = $_POST['id_kategori'];
        $judul       = $_POST['judul'];
        $slug_judul  = strtolower($judul);
        $slug_judul  = str_ireplace(" ", "-", $slug_judul);
        $foto_header = $tgl;
        $thumbs      = "thumb_".$tgl;
        $isi_post    = $_POST['isi_informasi'];
        $id_user     = $_POST['id_user'];
        if(isset($_POST['btnsimpan'])){
            $simpan = $informasi->create($tgl_post, $id_kategori, $judul, $slug_judul, $foto_header, $thumbs, $isi_post, $id_user);
        }else {
            $simpan = $informasi->update($_GET['id'], $tgl_post, $id_kategori, $judul, $slug_judul, $foto_header, $thumbs, $isi_post, $id_user);
        }
    
    }

?>